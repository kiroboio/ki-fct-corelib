import { ethers } from "ethers";

import FCT_ActuatorABI from "../src/abi/FCT_Actuator.abi.json";

const logs = [
  {
    transactionIndex: 0,
    blockNumber: 8243087,
    transactionHash: "0xc7b8f61ecdf9d52edfb9fba45f3ffebd63bb84dba7c53637ea75c0c9928e81b2",
    address: "0x5c44Ce0F64018Bc839a5cA7131502437e089A55d",
    topics: [
      "0x75b8aa66fe27063cdb97f9da7ba085c1676a0a7e22e73273c2c2342e427e361b",
      "0x2409a93401010100000000000000000000000000000000000000000000000036",
      "0x29a9cb8fb3f9eb2a6e712980e591b9e5e4ecc4392921f28028aa330712f955ee",
    ],
    data: "0x000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000000000000000000000000000000000000063b28ea4",
    logIndex: 0,
    blockHash: "0xc3621fef8c1137767febe6ebb48d31b8777e3d291143235f1230eb4b1ac200cd",
  },
  {
    transactionIndex: 0,
    blockNumber: 8243087,
    transactionHash: "0xc7b8f61ecdf9d52edfb9fba45f3ffebd63bb84dba7c53637ea75c0c9928e81b2",
    address: "0xba232b47a7dDFCCc221916cf08Da03a4973D3A1D",
    topics: [
      "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",
      "0x00000000000000000000000003357338ea477ff139170cf85c9a4063dfc03fc9",
      "0x000000000000000000000000e911180acde75bfbacfc8bbfd484768b6aa3bd30",
    ],
    data: "0x0000000000000000000000000000000000000000000000000de0b6b3a7640000",
    logIndex: 1,
    blockHash: "0xc3621fef8c1137767febe6ebb48d31b8777e3d291143235f1230eb4b1ac200cd",
  },
  {
    transactionIndex: 0,
    blockNumber: 8243087,
    transactionHash: "0xc7b8f61ecdf9d52edfb9fba45f3ffebd63bb84dba7c53637ea75c0c9928e81b2",
    address: "0x8c90555649F8B7DE5b9e2E2b951d8897748CdbEE",
    topics: [
      "0x3a48c1ec2337406c590a8fa1aefe827430d6c1623e3715936e47fc8fa5299412",
      "0x2409a93401010100000000000000000000000000000000000000000000000036",
      "0x00000000000000000000000003357338ea477ff139170cf85c9a4063dfc03fc9",
    ],
    data: "0x0000000000000000000000000000000000000000000000000000000000000001",
    logIndex: 2,
    blockHash: "0xc3621fef8c1137767febe6ebb48d31b8777e3d291143235f1230eb4b1ac200cd",
  },
  {
    transactionIndex: 0,
    blockNumber: 8243087,
    transactionHash: "0xc7b8f61ecdf9d52edfb9fba45f3ffebd63bb84dba7c53637ea75c0c9928e81b2",
    address: "0x4c0ca1Ab265d5A3489403B513b0505d231980CC4",
    topics: [
      "0xa9fb3015d4fdf1af5c13719bec86b7870426824a268fb0b3f0002ad32cd14ba3",
      "0x000000000000000000000000e911180acde75bfbacfc8bbfd484768b6aa3bd30",
      "0x000000000000000000000000e911180acde75bfbacfc8bbfd484768b6aa3bd30",
    ],
    data: "0x00000000000000000000000000000000000000000000073b3af2c8d072ccc31f0000000000000000000000000000000000000000000000000000000063b28ea4",
    logIndex: 3,
    blockHash: "0xc3621fef8c1137767febe6ebb48d31b8777e3d291143235f1230eb4b1ac200cd",
  },
  {
    transactionIndex: 0,
    blockNumber: 8243087,
    transactionHash: "0xc7b8f61ecdf9d52edfb9fba45f3ffebd63bb84dba7c53637ea75c0c9928e81b2",
    address: "0x4c0ca1Ab265d5A3489403B513b0505d231980CC4",
    topics: [
      "0xaa2cad13be9a2d755109e4cd404c0019beac803f447ecd77a1965677e2817753",
      "0x2409a93401010100000000000000000000000000000000000000000000000036",
      "0x00000000000000000000000003357338ea477ff139170cf85c9a4063dfc03fc9",
      "0x0000000000000000000000000000000000000000000000000000000000000000",
    ],
    data: "0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000d10851971844a319000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000029ce4da0d583d9650000000000000000000000000000000000000000000000000000cd72ecb1641d",
    logIndex: 4,
    blockHash: "0xc3621fef8c1137767febe6ebb48d31b8777e3d291143235f1230eb4b1ac200cd",
  },
  {
    transactionIndex: 0,
    blockNumber: 8243087,
    transactionHash: "0xc7b8f61ecdf9d52edfb9fba45f3ffebd63bb84dba7c53637ea75c0c9928e81b2",
    address: "0x4c0ca1Ab265d5A3489403B513b0505d231980CC4",
    topics: [
      "0x3d67d7b0242c56cec690a3513b11ac7c54835ff09550d772f7f354269829c669",
      "0x000000000000000000000000e911180acde75bfbacfc8bbfd484768b6aa3bd30",
      "0x000000000000000000000000e911180acde75bfbacfc8bbfd484768b6aa3bd30",
      "0x2409a93401010100000000000000000000000000000000000000000000000036",
    ],
    data: "0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a7393683560f659600000000000000000000000000000000000000000000000029ce4da0d583d9650000000000000000000000000000000000000000000000000000cd72ecb1641d0000000000000000000000000000000000000000000000000000cd72ecb1641d000000000000000000000000000000000000000000000000d10784242b933efc0000000000000000000000000000000000000000000000000000000000034fb40000000000000000000000000000000000000000000000000000000000012ceb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000057e00000000000000000000000000000000000000000000000000000000063b28ea4",
    logIndex: 5,
    blockHash: "0xc3621fef8c1137767febe6ebb48d31b8777e3d291143235f1230eb4b1ac200cd",
  },
];

async function main() {
  const FCT_Actuator = new ethers.utils.Interface(FCT_ActuatorABI);

  // From logs filter FCTE_CallPayment event
  const FCTE_CallPaymentTopic = FCT_Actuator.getEventTopic(FCT_Actuator.getEvent("FCTE_CallPayment"));

  const FCTE_CallPaymentLog = logs.find((log) => log.topics[0] === FCTE_CallPaymentTopic);

  const FCTE_CallPayment = FCT_Actuator.parseLog({
    data: FCTE_CallPaymentLog?.data as string,
    topics: FCTE_CallPaymentLog?.topics as string[],
  });

  console.log(FCTE_CallPayment.args.kiroFees.toString());
}

main()
  .then(() => {
    process.exit(0);
  })
  .catch((error) => {
    console.error(error);
    process.exitCode = 1;
  });
